<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="notice">
	<select id="selectAllNotice" parameterType="map" resultType="n">
		select * from
			(select row_number() over (order by rnum desc) as rnum1, rb.* from
			(select rownum as rnum, b.* from
			(select 
		        notice_no as noticeNo,
		        notice_title as noticeTitle,
		        notice_writer as noticeWriter,
		        notice_content as noticeContent,
		        read_cnt as readCnt,
		        notice_date as noticeDate
        from notice_tbl order by noticeNo desc)b)rb order by 3 desc) where rnum between #{start} and #{end}
	</select>
	
	<select id="insertNotice" parameterType="n">
		insert into
		notice_tbl values(notice_seq.nextval, #{noticeTitle}, #{noticeWriter}, #{noticeContent}, 0, to_char(sysdate, 'yyyy-mm-dd'))
	</select>
	
	<select id="selectMaxNotice" resultType="int">
		select max(notice_no) from notice_tbl
	</select>
	
	<insert id="insertNoticeFile" parameterType="nf">
		insert into
		notice_file_tbl values(notice_file_seq.nextval, #{noticeNo}, #{filename}, #{filepath})
	</insert>
</mapper>
